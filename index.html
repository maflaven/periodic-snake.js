<!DOCTYPE html>
<html>
  <head>
    <title>Periodic Snake</title>
    <link href="./lib/css/index.css" rel="stylesheet" type="text/css">
  </head>

  <body>
    <div id="game">

      <div id="screens">
        <div id="pause">
          <div>paused</div>
          <div>(press space)</div>
          <img id="instructions" src="./lib/images/instructions.png"/>
          <img id="controls" src="./lib/images/controls.png"/>
        </div>

        <div id="game-over">
          <div>game over</div>
          <div>(press space to restart)</div>
        </div>
      </div>

      <div id="statistics">
        <div id="eat-timer"></div>
        <div id="high-score"></div>
      </div>

      <canvas></canvas>

    </div>

    <audio src="./lib/audio/add.wav" preload="auto"></audio>
    <audio src="./lib/audio/remove.wav" preload="auto"></audio>
    <audio src="./lib/audio/shrink.wav" preload="auto"></audio>

    <script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-63428459-1', 'auto');
		  ga('send', 'pageview');

		</script>

    <script type="application/javascript" src="./lib/vendor/keymaster.js"></script>

    <script type="application/javascript" src="./lib/javascripts/util.js"></script>
    <script type="application/javascript" src="./lib/javascripts/movingObject.js"></script>
    <script type="application/javascript" src="./lib/javascripts/snake.js"></script>
    <script type="application/javascript" src="./lib/javascripts/snakeSegment.js"></script>
    <script type="application/javascript" src="./lib/javascripts/path.js"></script>
    <script type="application/javascript" src="./lib/javascripts/apple.js"></script>
    <script type="application/javascript" src="./lib/javascripts/game.js"></script>
    <script type="application/javascript" src="./lib/javascripts/gameView.js"></script>

    <script type="application/javascript">
      (function () {
        var audio = document.getElementsByTagName("audio");
        var screens = [
          document.getElementById("pause"),
          document.getElementById("game-over")
        ];
        var timer = document.getElementById("eat-timer");
        var highScore = document.getElementById("high-score");
        var canvasEl = document.getElementsByTagName("canvas")[0];
        canvasEl.width = PSnake.Game.DIM_X;
        canvasEl.height = PSnake.Game.DIM_Y;

        var ctx = canvasEl.getContext("2d");
        var game = new PSnake.Game(audio);
        var gameView = window.gameView = new PSnake.GameView(game, ctx, timer, highScore, screens);
        gameView.start();
        setTimeout(gameView.togglePause.bind(gameView), 1000 / PSnake.Game.FPS);
      })();
    </script>
  </body>
</html>
