<html>
  <head>
    <title>Periodic Snake</title>
    <link href="index.css" rel="stylesheet" type="text/css">
  </head>

  <body>
    <div id="game">

      <div id="screens">
        <div id="pause">
          <div>paused</div>
          <div>(press space to resume)</div>
          <img id="instructions" src="lib/images/instructions.png"/>
          <img id="controls" src="lib/images/controls.png"/>
        </div>

        <div id="game-over">
          <div>game over</div>
          <div>(press space to restart)</div>
        </div>
      </div>

      <div id="statistics">
        <div id="eat-timer"></div>
        <div id="high-score"></div>
      </div>

      <canvas></canvas>

    </div>

    <audio src="lib/audio/add.wav" preload="auto"></audio>
    <audio src="lib/audio/remove.wav" preload="auto"></audio>
    <audio src="lib/audio/shrink.wav" preload="auto"></audio>

    <script type="application/javascript" src="vendor/keymaster.js"></script>

    <script type="application/javascript" src="lib/util.js"></script>
    <script type="application/javascript" src="lib/movingObject.js"></script>
    <script type="application/javascript" src="lib/snake.js"></script>
    <script type="application/javascript" src="lib/snakeSegment.js"></script>
    <script type="application/javascript" src="lib/path.js"></script>
    <script type="application/javascript" src="lib/apple.js"></script>
    <script type="application/javascript" src="lib/game.js"></script>
    <script type="application/javascript" src="lib/gameView.js"></script>

    <script type="application/javascript">
      (function () {
        var audio = document.getElementsByTagName("audio");
        var screens = [
          document.getElementById("pause"),
          document.getElementById("game-over")
        ];
        var timer = document.getElementById("eat-timer");
        var highScore = document.getElementById("high-score");
        var canvasEl = document.getElementsByTagName("canvas")[0];
        canvasEl.width = PSnake.Game.DIM_X;
        canvasEl.height = PSnake.Game.DIM_Y;

        var ctx = canvasEl.getContext("2d");
        var game = new PSnake.Game(audio);
        var gameView = new PSnake.GameView(game, ctx, timer, highScore, screens);
        gameView.start();
        setTimeout(gameView.togglePause.bind(gameView), 1000 / PSnake.Game.FPS);
      })();
    </script>
  </body>
</html>
